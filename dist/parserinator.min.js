"use strict";!function(){function n(){var n={api_root:null,api_version:null};this.setOptions=function(r){angular.extend(n,r)},this.$get=[function(){function r(n){return 0===n.indexOf("http://")||0===n.indexOf("https://")}var t={generateApiUrl:function(n){var t=n.api_root,e=n.api_version,i=void 0;return t&&e?(i=t+"/"+e,r(t)?i:"http://"+i):void 0}};return t.full_api_url=t.generateApiUrl(n),t}]}function r(n,r,t){function e(n){return function(r){return _.findWhere(n,{id:r.id,type:r.type})}}function i(n){return n?"?include="+n.join(","):"?"}function u(t,e){return function(u){var o=r.defer(),a=e||"",c=d+"/"+t,f=i(u.includes),s=u.endpoint?"/"+u.endpoint:"";return c+=s+f+h,n.jsonp(c,{cache:!0}).success(function(n){o.resolve(n)}).error(function(){o.reject(v+a)}),o.promise}}function o(n){var r=[];return _.each(n,function(n){r.push(a(n))}),r}function a(n){var r=angular.copy(n),t=r.relationships;return r=p(r,t)}function c(){}function f(n){var r={};return r=l(n),r&&r.relationships&&(r=p(r,r.relationship)),r}function s(n){var r=[],t={};return _.each(n,function(n){t=f(n),t?r.push(t):c()}),r}function p(n,r){var t,e,i,u={},o=[];for(e in r)r.hasOwnProperty(e)&&(t=r[e].data,t&&(Array.isArray(t)?(i=t[0].type,o=s(t),o.length&&(n[i]=o)):(u=f(t),u?(i=t.type,n[i]=u):c())));return n}var l,d=t.full_api_url,h="&callback=JSON_CALLBACK",v="Could not reach API",A={};return A.get=function(n,r){return u(n,r)},A.parse=function(n){var r,t=n.data,i=n.included?n.included:[];return l=e(i),r=Array.isArray(t)?o(t):a(t)},A}r.$inject=["$http","$q","$jsonAPI"],angular.module("parserinator",[]).provider("$jsonAPI",n).factory("jsonAPIParser",r)}();